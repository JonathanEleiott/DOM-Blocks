<html>
  <head>
    <title>Block 22 - Products and Companies</title>
  <style>
  main {
    display: flex;
  }
  main > * {
    flex: 1
  }
  </style>
  </head>
  <body>
    <main>
      <div>
        <h2>Companies</h2>
        <ul id='companyList'>
        </ul>
      </div>
      <div>
        <h2>Products</h2>
        <ul id='productList'>
        </ul>
      </div>
    </main>

    <script>
  let products;
  let companies;

  const fetchProducts = async()=> {
    const response = await fetch('https://www.acme-api.com/api/products');
    return response.json();
  };

  const fetchCompanies = async()=> {
    const response = await fetch('https://www.acme-api.com/api/companies');
    return response.json();
  };

  const renderProducts = ()=> {
    const html = products.map( product => {
      return `<li>
        ${product.name}
      </li>`;
    }).join('');
    document.querySelector('ul#productList').innerHTML = html;
  };

  const renderCompanies = ()=> {
    const html = companies.map( company => {
      return `<li>
        ${company.name}
      </li>`;
    }).join('');
    document.querySelector('ul#companyList').innerHTML = html;
  };

  const loadData = async()=> {
    try {
      const responses = await Promise.all([
        fetchProducts(),
        fetchCompanies()
      ]);
      products = responses[0];
      companies = responses[1];
      renderProducts();
      renderCompanies();
    }
    catch(ex){
      console.log(ex);
    }
  };

  loadData();

    </script>

  </body>
</html>
